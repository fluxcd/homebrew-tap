# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Flux < Formula
  desc "Flux CLI"
  homepage "https://fluxcd.io/"
  version "2.7.4"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/fluxcd/flux2/releases/download/v2.7.4/flux_2.7.4_darwin_amd64.tar.gz"
      sha256 "ed00a023afe801caf8b8e817eb69080eba1037cb0aa028f3f5d695e9652090f1"

      def install
        bin.install "flux"

        generate_completions_from_executable(bin/"flux", "completion")
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/fluxcd/flux2/releases/download/v2.7.4/flux_2.7.4_darwin_arm64.tar.gz"
      sha256 "86721cf8ea0ee5298cab29fa8bfa862d9a2a5292d4ae5b3dc13f6736d2a53f78"

      def install
        bin.install "flux"

        generate_completions_from_executable(bin/"flux", "completion")
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/fluxcd/flux2/releases/download/v2.7.4/flux_2.7.4_linux_amd64.tar.gz"
      sha256 "cc74636a893994f526f3742adbe5c087f2b4806cf625a0b7666b83bfdb968efe"
      def install
        bin.install "flux"

        generate_completions_from_executable(bin/"flux", "completion")
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/fluxcd/flux2/releases/download/v2.7.4/flux_2.7.4_linux_arm64.tar.gz"
      sha256 "58d32c51aada72829ce9a87d70d7a859b0e6d2815434b4495f41c2beaef584a9"
      def install
        bin.install "flux"

        generate_completions_from_executable(bin/"flux", "completion")
      end
    end
  end

  test do
    system "#{bin}/flux --version"
  end
end
