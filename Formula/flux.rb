# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Flux < Formula
  desc "Flux CLI"
  homepage "https://fluxcd.io/"
  version "2.5.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/fluxcd/flux2/releases/download/v2.5.0/flux_2.5.0_darwin_amd64.tar.gz"
      sha256 "b0b52873f999391952d8478697faf40edfe2df23481caf87cfa5a7de8ecb4084"

      def install
        bin.install "flux"

        generate_completions_from_executable(bin/"flux", "completion")
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/fluxcd/flux2/releases/download/v2.5.0/flux_2.5.0_darwin_arm64.tar.gz"
      sha256 "95fb111779a2ed95bd5445f8438a22ca42c53bf5de22002c8e32a9ce94383ee9"

      def install
        bin.install "flux"

        generate_completions_from_executable(bin/"flux", "completion")
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/fluxcd/flux2/releases/download/v2.5.0/flux_2.5.0_linux_amd64.tar.gz"
        sha256 "6d9ee65232269a81c765604d88d7afe347330aceb1c77f0bc45a2d1f93802fce"

        def install
          bin.install "flux"

          generate_completions_from_executable(bin/"flux", "completion")
        end
      end
    end
    if Hardware::CPU.arm?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/fluxcd/flux2/releases/download/v2.5.0/flux_2.5.0_linux_arm64.tar.gz"
        sha256 "470f9330c8180498c4f0d5f822d91631a6e63cf03ac7b8648889a6dba4c626ca"

        def install
          bin.install "flux"

          generate_completions_from_executable(bin/"flux", "completion")
        end
      end
    end
  end

  test do
    system "#{bin}/flux --version"
  end
end
